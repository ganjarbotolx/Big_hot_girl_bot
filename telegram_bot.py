import os
import random
from telegram import Update
from telegram.ext import Application, CommandHandler, ContextTypes

# ==============================================================================
# тЮдтЮдтЮд ржЖржкржирж╛рж░ ржмржЯрзЗрж░ ржЯрзЛржХрзЗржи ржПржЦрж╛ржирзЗ ржпрзБржХрзНржд ржХрж░ржмрзЗржи ржирж╛! 
#      ржПржЯрж┐ Render-ржПрж░ Environment Variable-ржП рж╕рзЗржЯ ржХрж░рждрзЗ рж╣ржмрзЗред
# ==============================================================================
BOT_TOKEN = os.environ.get("TELEGRAM_BOT_TOKEN")

# ==============================================================================
# тЮдтЮдтЮд ржЖржкржирж╛рж░ ржирж┐рж░рзНржжрж┐рж╖рзНржЯ ржУржпрж╝рзЗржмрж╕рж╛ржЗржЯрзЗрж░ ржнрж┐ржбрж┐ржУ рж▓рж┐ржЩрзНржХржЧрзБрж▓рзЛ ржПржЦрж╛ржирзЗ ржпрзЛржЧ ржХрж░рзБржи
#      ржирж┐ржЪрзЗрж░ ржЙржжрж╛рж╣рж░ржгржЧрзБрж▓рзЛ ржорзБржЫрзЗ ржЖржкржирж╛рж░ ржирж┐ржЬрзЗрж░ рж▓рж┐ржЩрзНржХржЧрзБрж▓рзЛ ржПржЦрж╛ржирзЗ ржкрзЗрж╕рзНржЯ ржХрж░рзБржиред
#      рж▓рж┐ржЩрзНржХржЧрзБрж▓рзЛ ржЕржмрж╢рзНржпржЗ рж╕рж░рж╛рж╕рж░рж┐ ржнрж┐ржбрж┐ржУ ржлрж╛ржЗрж▓рзЗрж░ рж▓рж┐ржЩрзНржХ рж╣рждрзЗ рж╣ржмрзЗ (ржпрзЗржоржи: .mp4)ред
# ==============================================================================
VIDEO_URLS = [
    "https://your-website.com/videos/video1.mp4",
    "https://your-website.com/videos/video2.mp4",
    "https://another-site.com/media/video3.mp4",
    # ржПржЦрж╛ржирзЗ ржпржд ржЦрзБрж╢рж┐ ржнрж┐ржбрж┐ржУ рж▓рж┐ржЩрзНржХ ржпрзЛржЧ ржХрж░рждрзЗ ржкрж╛рж░рзЗржи
]

async def start(update: Update, context: ContextTypes.DEFAULT_TYPE) -> None:
    """ржпржЦржи ржХрзЛржирзЛ ржмрзНржпржмрж╣рж╛рж░ржХрж╛рж░рзА /start ржХржорж╛ржирзНржб ржжрзЗржмрзЗ, ржПржЗ ржлрж╛ржВрж╢ржиржЯрж┐ ржХрж╛ржЬ ржХрж░ржмрзЗред"""
    user = update.effective_user
    chat_id = update.effective_chat.id

    await update.message.reply_html(
        f"рж╣рзНржпрж╛рж▓рзЛ {user.mention_html()}! ЁЯСЛ\n\nржЖржкржирж╛рж░ ржЬржирзНржп ржПржХржЯрж┐ ржнрж┐ржбрж┐ржУ ржкрж╛ржарж╛ржирзЛ рж╣ржЪрзНржЫрзЗ, ржЕржирзБржЧрзНрж░рж╣ ржХрж░рзЗ ржЕржкрзЗржХрзНрж╖рж╛ ржХрж░рзБржи...",
    )

    try:
        # ржнрж┐ржбрж┐ржУ рждрж╛рж▓рж┐ржХрж╛ ржерзЗржХрзЗ рж░тАНрзНржпрж╛ржирзНржбржоржнрж╛ржмрзЗ ржПржХржЯрж┐ ржнрж┐ржбрж┐ржУ рж▓рж┐ржЩрзНржХ ржмрзЗржЫрзЗ ржирзЗржУрзЯрж╛ рж╣ржЪрзНржЫрзЗ
        if VIDEO_URLS:
            video_url = random.choice(VIDEO_URLS)
            # ржмрзНржпржмрж╣рж╛рж░ржХрж╛рж░рзАржХрзЗ ржнрж┐ржбрж┐ржУ ржкрж╛ржарж╛ржирзЛ рж╣ржЪрзНржЫрзЗ
            await context.bot.send_video(chat_id=chat_id, video=video_url)
        else:
            await context.bot.send_message(
                chat_id=chat_id,
                text="ржжрзБржГржЦрж┐ржд, ржнрж┐ржбрж┐ржУрж░ рждрж╛рж▓рж┐ржХрж╛рзЯ ржХрзЛржирзЛ рж▓рж┐ржЩрзНржХ ржЦрзБржБржЬрзЗ ржкрж╛ржУрзЯрж╛ ржпрж╛рзЯржирж┐ред"
            )

    except Exception as e:
        # ржпржжрж┐ ржХрзЛржирзЛ ржХрж╛рж░ржгрзЗ ржнрж┐ржбрж┐ржУ ржкрж╛ржарж╛рждрзЗ рж╕ржорж╕рзНржпрж╛ рж╣рзЯ
        print(f"Error sending video: {e}")
        await context.bot.send_message(
            chat_id=chat_id,
            text="ржжрзБржГржЦрж┐ржд, ржПржЗ ржорзБрж╣рзВрж░рзНрждрзЗ ржнрж┐ржбрж┐ржУржЯрж┐ ржкрж╛ржарж╛рждрзЗ рж╕ржорж╕рзНржпрж╛ рж╣ржЪрзНржЫрзЗред"
        )

def main() -> None:
    """ржмржЯржЯрж┐ ржЪрж╛рж▓рзБ ржХрж░рж╛рж░ ржЬржирзНржп ржорзВрж▓ ржлрж╛ржВрж╢ржиред"""
    if not BOT_TOKEN:
        print("ЁЯФ┤ Error: TELEGRAM_BOT_TOKEN ржПржиржнрж╛рзЯрж░ржиржорзЗржирзНржЯ ржнрзНржпрж╛рж░рж┐рзЯрзЗржмрж▓ рж╕рзЗржЯ ржХрж░рж╛ ржирзЗржЗ!")
        return

    application = Application.builder().token(BOT_TOKEN).build()
    application.add_handler(CommandHandler("start", start))

    print("тЬЕ Bot is running...")
    application.run_polling()

if __name__ == "__main__":
    main()